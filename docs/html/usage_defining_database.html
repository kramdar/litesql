<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>LiteSQL: Defining Database</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="usage_defining_database">Defining Database </a></h1><h2><a class="anchor" name="dbdefinition">
Database Definition File</a></h2>
For those of you familiar with DTD, the file format is defined in <a href="http://litesql.sf.net/litesql.dtd" class="el">litesql.dtd</a><p>
To make valid XML, the definition file should begin with following lines: <div class="fragment"><pre class="fragment">&lt;?xml version=<span class="stringliteral">"1.0"</span>?&gt;
&lt;!DOCTYPE database SYSTEM <span class="stringliteral">"litesql.dtd"</span>&gt;
</pre></div><h3><a class="anchor" name="database_tag">
Database-tag</a></h3>
A database definition file has a root tag which encloses all definitions inside it. It must have exactly one 'database'-tag. <div class="fragment"><pre class="fragment">&lt;database name=<span class="stringliteral">"TestDatabase"</span> <span class="keyword">namespace</span>=<span class="stringliteral">"test"</span> [include=<span class="stringliteral">"extra.hpp"</span>]&gt;
   ... definitions ...
&lt;/database&gt;
</pre></div> Note: attributes in [square brackets] are optional.<p>
<ul>
<li>'namespace' - attribute defines C++ - namespace into which all generated classes will be put.</li><li>'include' - attribute defines C++ - header file to be included in generated header file</li></ul>
<p>
The definition above will be extracted to C++ - class test::TestDatabase.<h3><a class="anchor" name="object_tag">
Object-tag</a></h3>
Each 'object'-tag will be extracted to Persistent-class. 'object'-tags are placed inside 'database'-tag. <div class="fragment"><pre class="fragment">&lt;<span class="keywordtype">object</span> name=<span class="stringliteral">"MyObject"</span> [inherits=<span class="stringliteral">"ParentObject"</span>]&gt;
   ... definitions ...
&lt;/<span class="keywordtype">object</span>&gt;
</pre></div><p>
<ul>
<li>'inherits' - attribute defines the class from which the new class is inherited.</li></ul>
<h3><a class="anchor" name="field_tag">
Field-tag</a></h3>
'field'-tags are used to define Persistent object's fields (data members) and relation attributes. They can be placed inside 'object'-tag or 'relation'-tag. <div class="fragment"><pre class="fragment">&lt;field name=<span class="stringliteral">"myfield"</span> type=<span class="stringliteral">"integer"</span> [<span class="keywordflow">default</span>=<span class="stringliteral">"1"</span>] [indexed=<span class="stringliteral">"true"</span>]/&gt;
&lt;field name=<span class="stringliteral">"color"</span> type=<span class="stringliteral">"integer"</span>&gt;
    &lt;value name=<span class="stringliteral">"Red"</span> value=<span class="stringliteral">"0"</span>/&gt;
    &lt;value name=<span class="stringliteral">"Green"</span> value=<span class="stringliteral">"1"</span>/&gt;
&lt;/field&gt;
</pre></div><ul>
<li>possible values for 'type'-field are "integer","string","boolean","date","time" and "datetime"</li><li>'default' - attribute defines the initial value of field when object is created.</li><li>'indexed' - attribute defines whether to CREATE INDEX for the field or not, default value is 'false'.</li></ul>
<p>
Enumerated values can be specified by putting 'value'-tags inside 'field'-tag.<h3><a class="anchor" name="method_tag">
Method-tag</a></h3>
Persistent object's methods are defined with 'method'-tag. It is placed inside 'object'-tag.<p>
<div class="fragment"><pre class="fragment">&lt;method name=<span class="stringliteral">"myMethod"</span> [returntype=<span class="stringliteral">"void"</span>]&gt;
    &lt;param name=<span class="stringliteral">"magic"</span> type=<span class="stringliteral">"int"</span>/&gt;
&lt;/method&gt;
</pre></div><ul>
<li>'returntype' - attribute defines C++ - return type for method</li><li>'param' - tags are optional. They can be used to define parameters for method.</li></ul>
<h3><a class="anchor" name="relation_tag">
Relation-tag</a></h3>
'relation'-tag defines a relation between two or more objects.<p>
<div class="fragment"><pre class="fragment">&lt;relation [name=<span class="stringliteral">"SomeRelation"</span>] [<span class="keywordtype">id</span>=<span class="stringliteral">"1"</span>] [unidir=<span class="stringliteral">"true"</span>]&gt;
    &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Person"</span> [unique=<span class="stringliteral">"false"</span>] [limit=<span class="stringliteral">"one"</span>] [handle=<span class="stringliteral">"cars"</span>]/&gt;
    &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Car"</span> [limit=<span class="stringliteral">"many"</span>] [handle=<span class="stringliteral">"owner"</span>]/&gt;
    ... more related objects ...
    [&lt;field name=<span class="stringliteral">"order"</span> type=<span class="stringliteral">"integer"</span>/&gt;]
    ... more relation attributes ...
&lt;/relation&gt;
</pre></div><ul>
<li>'name'-attribute defines the name of C++ class of the relation</li><li>'id'-attribute is used to separate multiple relations with same objects (it is appended to the name of relation table)</li><li>'unidir'-attribute is used to indicate that the relation is not bidirectional, default is 'false'. Note: this has an effect only when two classes of the same type are in relation.</li><li>'relate' - tag defines object in relation</li><li>'limit' - attribute defines constraints for relation. Note: this has an effect only in 2-ended relations</li><li>'unique' - attribute defines constraints for relation, too. Note: this cannot be used when 'limit' is specified</li><li>'handle' - attribute defines identifier for relation handle, a short cut when accessing relation from a single object.</li><li>relation attributes can be defined using 'field'-tag</li><li>Note: Put relation attributes with default values last so link-method can be properly generated </li></ul>
<h3><a class="anchor" name="index_tag">
Index-tag</a></h3>
'index'-tag defines an index built on two or more fields. It can be used inside 'object'- and 'relation'-tags.<p>
<div class="fragment"><pre class="fragment">&lt;field name=<span class="stringliteral">"myfield"</span> type=<span class="stringliteral">"integer"</span> [<span class="keywordflow">default</span>=<span class="stringliteral">"value"</span>] [indexed=<span class="stringliteral">"true"</span>]/&gt;
&lt;field name=<span class="stringliteral">"color"</span> type=<span class="stringliteral">"integer"</span>&gt;
    &lt;value name=<span class="stringliteral">"Red"</span> value=<span class="stringliteral">"0"</span>/&gt;
    &lt;value name=<span class="stringliteral">"Green"</span> value=<span class="stringliteral">"1"</span>/&gt;
&lt;/field&gt;
&lt;index [unique=<span class="stringliteral">"true"</span>]&gt;
    &lt;indexfield name=<span class="stringliteral">"myfield"</span>/&gt;
    &lt;indexfield name=<span class="stringliteral">"color"</span>/&gt;
&lt;/index&gt;
</pre></div><ul>
<li>'unique' - attribute defines whether there can be multiple equal field tuples</li></ul>
<h3><a class="anchor" name="indexfield_tag">
Indexfield-tag</a></h3>
'indexfield'-tag defines an index field inside multi field index. It can be used inside 'index'-tag.<h2><a class="anchor" name="namingnote">
Naming Identifiers</a></h2>
C++'s reserved words cannot be used as identifier names. Also, "id"- and "type"-fields are defined for each Persistent-object. </div>
<hr />
<a href="http://sourceforge.net"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=113304&amp;type=2" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>

