<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>LiteSQL: LiteSQL - C++ Object-Relational Persistence Framework</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<META NAME="description" CONTENT="LiteSQL is a C++ library that integrates C++ objects tightly to relational database and thus provides an object persistence layer. LiteSQL supports SQLite3, PostgreSQL and MySQL as backends. LiteSQL creates tables, indexes and sequences to database and upgrades schema when needed."/>
<meta name="keywords" content="object-relational,object persistence,c++,library,postgresql,mysql,sqlite,sql,database,xml"/>
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>LiteSQL - C++ Object-Relational Persistence Framework</h1>
<p>
<h3 align="center">0.3.3 </h3><h2><a class="anchor" name="intro">
Introduction</a></h2>
LiteSQL is a C++ library that integrates C++ objects tightly to relational database and thus provides an object persistence layer. LiteSQL supports SQLite3, PostgreSQL and MySQL as backends. LiteSQL creates tables, indexes and sequences to database and upgrades schema when needed.<p>
In addition to object persistence, LiteSQL provides object relations which can be used to model any kind of C++ data structures. Objects can be selected, filtered and ordered using template- and class-based API with type checking at compile time.<h2><a class="anchor" name="features">
Features</a></h2>
<ul>
<li>SQLite3, PostgreSQL and MySQL - backend support</li><li>object persistence layer with relation support</li><li>automatic database schema creation and upgrading</li><li>create complex SQL queries using compile time checked class API; minimizes need to write SQL query strings</li></ul>
<h2><a class="anchor" name="status">
Status</a></h2>
<ul>
<li>this a testing release</li><li>no Windows support yet</li></ul>
<h2><a class="anchor" name="requirements">
Requirements</a></h2>
<ul>
<li>gcc-compatible C++ compiler that supports member templates</li><li>client library and header files for at least one backend: libsqlite3, libmysqlclient or libpq</li></ul>
<h3><a class="anchor" name="optionalreqs">
Optional</a></h3>
<ul>
<li>automake 1.4</li><li>autoconf 2.59</li><li>flexml 1.44 (to generate code generator ;)</li><li>doxygen 1.4.5</li><li>dpkg-buildpackage (to generate debian packages) </li></ul>
<h2><a class="anchor" name="license">
License</a></h2>
This library is distributed under the terms of <a class="el" href="bsdlicense.html">BSD-License</a><h2><a class="anchor" name="helpneeded">
Help Needed</a></h2>
All feedback concerning the library is welcome. If you want to advance the development of the library, you may contribute by:<ul>
<li>using the library in your projects</li><li>submitting bug reports or feature requests</li><li>implementing new a feature (ask first if somebody is already working on it)</li><li>testing if the library compiles and runs on your system</li><li>making the library compile and run on your system</li><li>writing usage examples </li></ul>
<h2><a class="anchor" name="support">
Support</a></h2>
Subscribe to <a href="http://lists.sourceforge.net/lists/listinfo/litesql-users" class="el">litesql-users mailing list</a> and describe your problems or ideas there.<h2><a class="anchor" name="manual">
Manual</a></h2>
<h3><a class="anchor" name="toc">
Index</a></h3>
<ul>
<li><a class="el" href="implementation.html">Implementation Details</a></li><li><a class="el" href="changes.html">Changes</a></li><li><a class="el" href="contributors.html">Contributors</a></li><li><a class="el" href="future.html">The Future</a></li><li><a class="el" href="usage_defining_database.html">Defining Database</a></li><li><a class="el" href="usage_database_create_drop.html">Creating and Dropping Database</a></li><li><a class="el" href="usage_update_delete_persistents.html">Storing and Deleting Persistents</a></li><li><a class="el" href="usage_selecting_persistents.html">Selecting Persistents and Expr-API</a></li><li><a class="el" href="usage_using_relations.html">Using Relations</a></li><li><a class="el" href="usage_upcasting.html">Upcasting and Virtual Methods</a></li><li><a class="el" href="usage_cursor.html">Using Cursor</a></li><li><a class="el" href="usage_using_database.html">Database API: raw queries</a></li><li><a class="el" href="mysql_notes.html">MySQL specific notes</a></li><li><a class="el" href="cost.html">Cost of Using LiteSQL</a></li></ul>
<h3><a class="anchor" name="exlinks">
External Links</a></h3>
<ul>
<li><a href="http://sourceforge.net/project/showfiles.php?group_id=113304" class="el">Download</a></li><li><a href="http://sourceforge.net/tracker/?group_id=113304&atid=664757" class="el">Bug Tracker</a></li><li><a href="http://sourceforge.net/forum/?group_id=113304" class="el">Forum</a></li><li><a href="http://sourceforge.net/projects/litesql" class="el">Project Page</a></li></ul>
<h2><a class="anchor" name="quickstart">
Quick Start</a></h2>
<h3><a class="anchor" name="quickstart1">
Step 1: Write XML-file which defines objects, fields, methods and relations in database.</a></h3>
Simple example database definition file exampledatabase.xml: <div class="fragment"><pre class="fragment">&lt;?xml version=<span class="stringliteral">"1.0"</span>?&gt;
&lt;!DOCTYPE database SYSTEM <span class="stringliteral">"litesql.dtd"</span>&gt; 
&lt;database name=<span class="stringliteral">"ExampleDatabase"</span> <span class="keyword">namespace</span>=<span class="stringliteral">"example"</span>&gt;
    &lt;<span class="keywordtype">object</span> name=<span class="stringliteral">"Person"</span>&gt;
        &lt;field name=<span class="stringliteral">"name"</span> type=<span class="stringliteral">"string"</span>/&gt;
        &lt;field name=<span class="stringliteral">"age"</span> type=<span class="stringliteral">"integer"</span> <span class="keywordflow">default</span>=<span class="stringliteral">"15"</span>/&gt;
        &lt;field name=<span class="stringliteral">"sex"</span> type=<span class="stringliteral">"integer"</span>&gt;
            &lt;value name=<span class="stringliteral">"Male"</span> value=<span class="stringliteral">"0"</span>/&gt;
            &lt;value name=<span class="stringliteral">"Female"</span> value=<span class="stringliteral">"1"</span>/&gt;
        &lt;/field&gt;
        &lt;method name=<span class="stringliteral">"sayHello"</span>/&gt;
    &lt;/<span class="keywordtype">object</span>&gt;
    &lt;relation <span class="keywordtype">id</span>=<span class="stringliteral">"Mother"</span> unidir=<span class="stringliteral">"true"</span>&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Person"</span> limit=<span class="stringliteral">"many"</span> handle=<span class="stringliteral">"mother"</span>/&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Person"</span> limit=<span class="stringliteral">"one"</span>/&gt;
    &lt;/relation&gt;
    &lt;relation <span class="keywordtype">id</span>=<span class="stringliteral">"Father"</span> unidir=<span class="stringliteral">"true"</span>&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Person"</span> limit=<span class="stringliteral">"many"</span> handle=<span class="stringliteral">"father"</span>/&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Person"</span> limit=<span class="stringliteral">"one"</span>/&gt;
    &lt;/relation&gt;
    &lt;relation <span class="keywordtype">id</span>=<span class="stringliteral">"Siblings"</span>&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Person"</span> handle=<span class="stringliteral">"siblings"</span>/&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Person"</span>/&gt;
    &lt;/relation&gt;
    &lt;relation <span class="keywordtype">id</span>=<span class="stringliteral">"Children"</span> unidir=<span class="stringliteral">"true"</span>&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Person"</span> handle=<span class="stringliteral">"children"</span>/&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Person"</span>/&gt;
    &lt;/relation&gt;
    &lt;<span class="keywordtype">object</span> name=<span class="stringliteral">"Role"</span>/&gt;
    &lt;<span class="keywordtype">object</span> name=<span class="stringliteral">"Student"</span> inherits=<span class="stringliteral">"Role"</span>/&gt;
    &lt;<span class="keywordtype">object</span> name=<span class="stringliteral">"Employee"</span> inherits=<span class="stringliteral">"Role"</span>/&gt;
    &lt;relation <span class="keywordtype">id</span>=<span class="stringliteral">"Roles"</span> name=<span class="stringliteral">"RoleRelation"</span>&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Person"</span> handle=<span class="stringliteral">"roles"</span> limit=<span class="stringliteral">"one"</span>/&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Role"</span> handle=<span class="stringliteral">"person"</span>/&gt;
    &lt;/relation&gt;
    &lt;<span class="keywordtype">object</span> name=<span class="stringliteral">"School"</span>&gt;
        &lt;field name=<span class="stringliteral">"name"</span> type=<span class="stringliteral">"string"</span>/&gt;
    &lt;/<span class="keywordtype">object</span>&gt;
    &lt;relation&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Student"</span> handle=<span class="stringliteral">"school"</span>/&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"School"</span> handle=<span class="stringliteral">"students"</span> limit=<span class="stringliteral">"one"</span>/&gt;
    &lt;/relation&gt;
    &lt;<span class="keywordtype">object</span> name=<span class="stringliteral">"Office"</span>/&gt;
    &lt;relation&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Employee"</span> handle=<span class="stringliteral">"office"</span>/&gt;
        &lt;relate <span class="keywordtype">object</span>=<span class="stringliteral">"Office"</span> handle=<span class="stringliteral">"employees"</span>/&gt;
    &lt;/relation&gt;
&lt;/database&gt;
</pre></div> Figure of database (generated with graphviz and litesql-gen): <div align="center">
<img src="exampledatabase.png" alt="exampledatabase.png">
</div>
<h3><a class="anchor" name="quickstart2">
Step 2: Run Code Generator</a></h3>
<div class="fragment"><pre class="fragment">litesql-gen exampledatabase.xml
</pre></div> Files exampledatabase.cpp and exampledatabase.hpp are written.<h3><a class="anchor" name="quickstart3">
Step 3: Write Application Code</a></h3>
<div class="fragment"><pre class="fragment"><span class="comment">// include LiteSQL's header file and generated header file</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include "<a class="code" href="litesql_8hpp.html" title="include this from your project">litesql.hpp</a>"</span>
<span class="preprocessor">#include "exampledatabase.hpp"</span>
<span class="comment">// provide implementation for Person::sayHello</span>
<span class="keywordtype">void</span> example::Person::sayHello() {
    std::cout &lt;&lt; <span class="stringliteral">"Hi! My name is "</span> &lt;&lt; name 
        &lt;&lt; <span class="stringliteral">" and I am "</span> &lt;&lt; age &lt;&lt; <span class="stringliteral">" years old."</span> &lt;&lt; std::endl;
}

<span class="comment">// no name collisions expected</span>
<span class="keyword">using namespace </span>litesql;
<span class="keyword">using namespace </span>example;

<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {

         std::cout &lt;&lt; <span class="stringliteral">"joo"</span> &lt;&lt; std::endl;
    <span class="keywordflow">try</span> {
        <span class="comment">// using SQLite3 as backend</span>
         ExampleDatabase db(<span class="stringliteral">"sqlite3"</span>, <span class="stringliteral">"database=example.db"</span>);
        <span class="comment">// create tables, sequences and indexes</span>
        db.verbose = <span class="keyword">true</span>;
        db.create();
        <span class="comment">// start transaction</span>
        db.begin();

        <span class="comment">// create couple of Person-objects</span>
        Person jeff(db);
        jeff.name = <span class="stringliteral">"Jeff"</span>;
        jeff.sex = Person::Sex::Male;
        jeff.age = 32;
        <span class="comment">// store Jeff to database</span>
        jeff.update();
        Person jill(db);
        jill.name = <span class="stringliteral">"Jill"</span>;
        jill.sex = Person::Sex::Female;
        jill.age = 33;
        jill.update();
        Person jack(db);
        jack.name = <span class="stringliteral">"Jack"</span>;
        jack.sex = Person::Sex::Male;
        jack.update();
        Person jess(db);
        jess.name = <span class="stringliteral">"Jess"</span>;
        jess.sex = Person::Sex::Female;
        jess.update();
        <span class="comment">// build up relationships between Persons </span>
        jeff.children().link(jack);
        jill.children().link(jack);
        jill.children().link(jess);
        jack.father().link(jeff);
        jack.mother().link(jill);
        jess.mother().link(jill);
        jack.siblings().link(jill);
        <span class="comment">// roles (linking examples)</span>
        Office office(db);
        office.update();
        School school(db);
        school.update();

        Employee jeffRole(db);
        jeffRole.update();
        jeff.roles().link(jeffRole);
        jeffRole.office().link(office);

        Student jackRole(db), jessRole(db);
        jackRole.update();
        jessRole.update();
        jack.roles().link(jackRole);
        jess.roles().link(jessRole);
        
        jackRole.school().link(school);
        jessRole.school().link(school);
        
        <span class="comment">// count Persons</span>
        cout &lt;&lt; <span class="stringliteral">"There are "</span> &lt;&lt; select&lt;Person&gt;(db).count() 
             &lt;&lt; <span class="stringliteral">" persons."</span> &lt;&lt; endl;
    
        <span class="comment">// select all Persons and order them by age</span>
        vector&lt;Person&gt; family = select&lt;Person&gt;(db).orderBy(Person::Age).all();
        <span class="comment">// show results</span>
        <span class="keywordflow">for</span> (vector&lt;Person&gt;::iterator i = family.begin(); i != family.end(); i++)
            cout &lt;&lt; toString(*i) &lt;&lt; endl;
             
        <span class="comment">// select intersection of Jeff's and Jill's children and</span>
        <span class="comment">// iterate results with cursor</span>
        Cursor&lt;Person&gt; cursor = intersect(jeff.children().get(), 
                                          jill.children().get()).cursor();
        <span class="comment">// Jack should say hello</span>
        <span class="keywordflow">for</span> (;cursor.rowsLeft();cursor++) 
            (*cursor).sayHello();
        
        <span class="comment">// select a non-existing Person</span>
        <span class="keywordflow">try</span> {
            select&lt;Person&gt;(db, Person::Id == 100).one();
        } <span class="keywordflow">catch</span> (NotFound e) {
            cout &lt;&lt; <span class="stringliteral">"No Person with id 100"</span> &lt;&lt; endl;
        }
        <span class="comment">// commit transaction</span>
        db.commit();
        <span class="comment">// clean up </span>
        db.drop();
    } <span class="keywordflow">catch</span> (Except e) {
        cerr &lt;&lt; e &lt;&lt; endl;
        <span class="keywordflow">return</span> -1;
    }
    <span class="keywordflow">return</span> 0;
}
</pre></div><h3><a class="anchor" name="quickstart4">
Step 4: Compile, Link and Execute</a></h3>
When executed, the example program will output following: <div class="fragment"><pre class="fragment">There are 4 persons.
-------------------------------------
id_ = 4
type_ = Person
name_ = Jess
age_ = 15
sex_ = 1
-------------------------------------

-------------------------------------
id_ = 3
type_ = Person
name_ = Jack
age_ = 15
sex_ = 0
-------------------------------------

-------------------------------------
id_ = 1
type_ = Person
name_ = Jeff
age_ = 32
sex_ = 0
-------------------------------------

-------------------------------------
id_ = 2
type_ = Person
name_ = Jill
age_ = 33
sex_ = 1
-------------------------------------

Hi! My name is Jack and I am 15 years old.
No Person with <span class="keywordtype">id</span> 100
</pre></div> Following SQL queries are executed under the hood. Most of the queries are related to creating database schema and storing it to schema-table. <div class="fragment"><pre class="fragment">CREATE TABLE schema (name TEXT, type TEXT, sql TEXT);
DELETE FROM schema WHERE name=<span class="stringliteral">'schema'</span> and type=<span class="stringliteral">'table'</span>
INSERT INTO schema VALUES (<span class="stringliteral">'schema'</span>,<span class="stringliteral">'table'</span>,<span class="stringliteral">'CREATE TABLE schema (name TEXT, </span>
<span class="stringliteral">type TEXT, sql TEXT);'</span>)
CREATE TABLE Person_ (id_ INTEGER PRIMARY KEY,type_ TEXT,name_ TEXT,age_ 
INTEGER,sex_ INTEGER)
DELETE FROM schema WHERE name='Person_' and type='table'
INSERT INTO schema VALUES ('Person_','table','CREATE TABLE Person_ (id_ INTEGER 
PRIMARY KEY,type_ TEXT,name_ TEXT,age_ INTEGER,sex_ INTEGER)')
CREATE TABLE Role_ (id_ INTEGER PRIMARY KEY,type_ TEXT)
DELETE FROM schema WHERE name='Role_' and type='table'
INSERT INTO schema VALUES ('Role_','table','CREATE TABLE Role_ (id_ INTEGER 
PRIMARY KEY,type_ TEXT)')
CREATE TABLE Student_ (id_ INTEGER PRIMARY KEY)
DELETE FROM schema WHERE name='Student_' and type='table'
INSERT INTO schema VALUES ('Student_','table','CREATE TABLE Student_ (id_ 
INTEGER PRIMARY KEY)')
CREATE TABLE Employee_ (id_ INTEGER PRIMARY KEY)
DELETE FROM schema WHERE name='Employee_' and type='table'
INSERT INTO schema VALUES ('Employee_','table','CREATE TABLE Employee_ (id_ 
INTEGER PRIMARY KEY)')
CREATE TABLE School_ (id_ INTEGER PRIMARY KEY,type_ TEXT,name_ TEXT)
DELETE FROM schema WHERE name='School_' and type='table'
INSERT INTO schema VALUES ('School_','table','CREATE TABLE School_ (id_ INTEGER 
PRIMARY KEY,type_ TEXT,name_ TEXT)')
CREATE TABLE Office_ (id_ INTEGER PRIMARY KEY,type_ TEXT)
DELETE FROM schema WHERE name='Office_' and type='table'
INSERT INTO schema VALUES ('Office_','table','CREATE TABLE Office_ (id_ INTEGER 
PRIMARY KEY,type_ TEXT)')
CREATE TABLE Person_Person_Mother (Person1 INTEGER UNIQUE,Person2 INTEGER)
DELETE FROM schema WHERE name='Person_Person_Mother' and type='table'
INSERT INTO schema VALUES ('Person_Person_Mother','table','CREATE TABLE 
Person_Person_Mother (Person1 INTEGER UNIQUE,Person2 INTEGER)')
CREATE INDEX Person_Person_Mother_all_idx ON Person_Person_Mother 
(Person1,Person2)
DELETE FROM schema WHERE name='Person_Person_Mother_all_idx' and type='index'
INSERT INTO schema VALUES ('Person_Person_Mother_all_idx','index','CREATE INDEX 
Person_Person_Mother_all_idx ON Person_Person_Mother (Person1,Person2)')
CREATE INDEX _cdc62ca2d05d04aad6154853e5eeff0a ON Person_Person_Mother (Person1)
DELETE FROM schema WHERE name='_cdc62ca2d05d04aad6154853e5eeff0a' and 
type='index'
INSERT INTO schema VALUES ('_cdc62ca2d05d04aad6154853e5eeff0a','index','CREATE 
INDEX _cdc62ca2d05d04aad6154853e5eeff0a ON Person_Person_Mother (Person1)')
CREATE INDEX _19b685f391ae9a29eee2260423cb2e1c ON Person_Person_Mother (Person2)
DELETE FROM schema WHERE name='_19b685f391ae9a29eee2260423cb2e1c' and 
type='index'
INSERT INTO schema VALUES ('_19b685f391ae9a29eee2260423cb2e1c','index','CREATE 
INDEX _19b685f391ae9a29eee2260423cb2e1c ON Person_Person_Mother (Person2)')
CREATE TABLE Person_Person_Father (Person1 INTEGER UNIQUE,Person2 INTEGER)
DELETE FROM schema WHERE name='Person_Person_Father' and type='table'
INSERT INTO schema VALUES ('Person_Person_Father','table','CREATE TABLE 
Person_Person_Father (Person1 INTEGER UNIQUE,Person2 INTEGER)')
CREATE INDEX Person_Person_Father_all_idx ON Person_Person_Father 
(Person1,Person2)
DELETE FROM schema WHERE name='Person_Person_Father_all_idx' and type='index'
INSERT INTO schema VALUES ('Person_Person_Father_all_idx','index','CREATE INDEX 
Person_Person_Father_all_idx ON Person_Person_Father (Person1,Person2)')
CREATE INDEX _2bcb3ead0dfff9e1086a524c6e4ad2c3 ON Person_Person_Father (Person1)
DELETE FROM schema WHERE name='_2bcb3ead0dfff9e1086a524c6e4ad2c3' and 
type='index'
INSERT INTO schema VALUES ('_2bcb3ead0dfff9e1086a524c6e4ad2c3','index','CREATE 
INDEX _2bcb3ead0dfff9e1086a524c6e4ad2c3 ON Person_Person_Father (Person1)')
CREATE INDEX _7f31aa2d807b53cd7d4a4afc2d82f213 ON Person_Person_Father (Person2)
DELETE FROM schema WHERE name='_7f31aa2d807b53cd7d4a4afc2d82f213' and 
type='index'
INSERT INTO schema VALUES ('_7f31aa2d807b53cd7d4a4afc2d82f213','index','CREATE 
INDEX _7f31aa2d807b53cd7d4a4afc2d82f213 ON Person_Person_Father (Person2)')
CREATE TABLE Person_Person_Siblings (Person1 INTEGER,Person2 INTEGER)
DELETE FROM schema WHERE name='Person_Person_Siblings' and type='table'
INSERT INTO schema VALUES ('Person_Person_Siblings','table','CREATE TABLE 
Person_Person_Siblings (Person1 INTEGER,Person2 INTEGER)')
CREATE INDEX Person_Person_Siblings_all_idx ON Person_Person_Siblings 
(Person1,Person2)
DELETE FROM schema WHERE name='Person_Person_Siblings_all_idx' and type='index'
INSERT INTO schema VALUES ('Person_Person_Siblings_all_idx','index','CREATE 
INDEX Person_Person_Siblings_all_idx ON Person_Person_Siblings 
(Person1,Person2)')
CREATE INDEX _40a9e165aea530226f7b3d11bbf6cc89 ON Person_Person_Siblings 
(Person1)
DELETE FROM schema WHERE name='_40a9e165aea530226f7b3d11bbf6cc89' and 
type='index'
INSERT INTO schema VALUES ('_40a9e165aea530226f7b3d11bbf6cc89','index','CREATE 
INDEX _40a9e165aea530226f7b3d11bbf6cc89 ON Person_Person_Siblings (Person1)')
CREATE INDEX _d18823db577af84f812fec0813507d80 ON Person_Person_Siblings 
(Person2)
DELETE FROM schema WHERE name='_d18823db577af84f812fec0813507d80' and 
type='index'
INSERT INTO schema VALUES ('_d18823db577af84f812fec0813507d80','index','CREATE 
INDEX _d18823db577af84f812fec0813507d80 ON Person_Person_Siblings (Person2)')
CREATE TABLE Person_Person_Children (Person1 INTEGER,Person2 INTEGER)
DELETE FROM schema WHERE name='Person_Person_Children' and type='table'
INSERT INTO schema VALUES ('Person_Person_Children','table','CREATE TABLE 
Person_Person_Children (Person1 INTEGER,Person2 INTEGER)')
CREATE INDEX Person_Person_Children_all_idx ON Person_Person_Children 
(Person1,Person2)
DELETE FROM schema WHERE name='Person_Person_Children_all_idx' and type='index'
INSERT INTO schema VALUES ('Person_Person_Children_all_idx','index','CREATE 
INDEX Person_Person_Children_all_idx ON Person_Person_Children 
(Person1,Person2)')
CREATE INDEX _fe1eabc4d6da9afbc562dc04052d972d ON Person_Person_Children 
(Person1)
DELETE FROM schema WHERE name='_fe1eabc4d6da9afbc562dc04052d972d' and 
type='index'
INSERT INTO schema VALUES ('_fe1eabc4d6da9afbc562dc04052d972d','index','CREATE 
INDEX _fe1eabc4d6da9afbc562dc04052d972d ON Person_Person_Children (Person1)')
CREATE INDEX _81a57a61bb98b640be6eb729bb5b57f9 ON Person_Person_Children 
(Person2)
DELETE FROM schema WHERE name='_81a57a61bb98b640be6eb729bb5b57f9' and 
type='index'
INSERT INTO schema VALUES ('_81a57a61bb98b640be6eb729bb5b57f9','index','CREATE 
INDEX _81a57a61bb98b640be6eb729bb5b57f9 ON Person_Person_Children (Person2)')
CREATE TABLE Person_Role_Roles (Person1 INTEGER,Role2 INTEGER UNIQUE)
DELETE FROM schema WHERE name='Person_Role_Roles' and type='table'
INSERT INTO schema VALUES ('Person_Role_Roles','table','CREATE TABLE 
Person_Role_Roles (Person1 INTEGER,Role2 INTEGER UNIQUE)')
CREATE INDEX Person_Role_Roles_all_idx ON Person_Role_Roles (Person1,Role2)
DELETE FROM schema WHERE name='Person_Role_Roles_all_idx' and type='index'
INSERT INTO schema VALUES ('Person_Role_Roles_all_idx','index','CREATE INDEX 
Person_Role_Roles_all_idx ON Person_Role_Roles (Person1,Role2)')
CREATE INDEX Person_Role_Roles_person_idx ON Person_Role_Roles (Person1)
DELETE FROM schema WHERE name='Person_Role_Roles_person_idx' and type='index'
INSERT INTO schema VALUES ('Person_Role_Roles_person_idx','index','CREATE INDEX 
Person_Role_Roles_person_idx ON Person_Role_Roles (Person1)')
CREATE INDEX Person_Role_Roles_role_idx ON Person_Role_Roles (Role2)
DELETE FROM schema WHERE name='Person_Role_Roles_role_idx' and type='index'
INSERT INTO schema VALUES ('Person_Role_Roles_role_idx','index','CREATE INDEX 
Person_Role_Roles_role_idx ON Person_Role_Roles (Role2)')
CREATE TABLE School_Student_ (School1 INTEGER,Student2 INTEGER UNIQUE)
DELETE FROM schema WHERE name='School_Student_' and type='table'
INSERT INTO schema VALUES ('School_Student_','table','CREATE TABLE 
School_Student_ (School1 INTEGER,Student2 INTEGER UNIQUE)')
CREATE INDEX School_Student__all_idx ON School_Student_ (School1,Student2)
DELETE FROM schema WHERE name='School_Student__all_idx' and type='index'
INSERT INTO schema VALUES ('School_Student__all_idx','index','CREATE INDEX 
School_Student__all_idx ON School_Student_ (School1,Student2)')
CREATE INDEX School_Student__school_idx ON School_Student_ (School1)
DELETE FROM schema WHERE name='School_Student__school_idx' and type='index'
INSERT INTO schema VALUES ('School_Student__school_idx','index','CREATE INDEX 
School_Student__school_idx ON School_Student_ (School1)')
CREATE INDEX School_Student__student_idx ON School_Student_ (Student2)
DELETE FROM schema WHERE name='School_Student__student_idx' and type='index'
INSERT INTO schema VALUES ('School_Student__student_idx','index','CREATE INDEX 
School_Student__student_idx ON School_Student_ (Student2)')
CREATE TABLE Employee_Office_ (Employee1 INTEGER,Office2 INTEGER)
DELETE FROM schema WHERE name='Employee_Office_' and type='table'
INSERT INTO schema VALUES ('Employee_Office_','table','CREATE TABLE 
Employee_Office_ (Employee1 INTEGER,Office2 INTEGER)')
CREATE INDEX Employee_Office__all_idx ON Employee_Office_ (Employee1,Office2)
DELETE FROM schema WHERE name='Employee_Office__all_idx' and type='index'
INSERT INTO schema VALUES ('Employee_Office__all_idx','index','CREATE INDEX 
Employee_Office__all_idx ON Employee_Office_ (Employee1,Office2)')
CREATE INDEX Employee_Office__employee_idx ON Employee_Office_ (Employee1)
DELETE FROM schema WHERE name='Employee_Office__employee_idx' and type='index'
INSERT INTO schema VALUES ('Employee_Office__employee_idx','index','CREATE 
INDEX Employee_Office__employee_idx ON Employee_Office_ (Employee1)')
CREATE INDEX Employee_Office__office_idx ON Employee_Office_ (Office2)
DELETE FROM schema WHERE name='Employee_Office__office_idx' and type='index'
INSERT INTO schema VALUES ('Employee_Office__office_idx','index','CREATE INDEX 
Employee_Office__office_idx ON Employee_Office_ (Office2)')
INSERT INTO Person_ (id_,type_,name_,age_,sex_) VALUES 
(NULL,'Person','Jeff','32','0');
INSERT INTO Person_ (id_,type_,name_,age_,sex_) VALUES 
(NULL,'Person','Jill','33','1');
INSERT INTO Person_ (id_,type_,name_,age_,sex_) VALUES 
(NULL,'Person','Jack','15','0');
INSERT INTO Person_ (id_,type_,name_,age_,sex_) VALUES 
(NULL,'Person','Jess','15','1');
INSERT INTO Person_Person_Children (Person1,Person2) VALUES ('1','3')
INSERT INTO Person_Person_Children (Person1,Person2) VALUES ('2','3')
INSERT INTO Person_Person_Children (Person1,Person2) VALUES ('2','4')
INSERT INTO Person_Person_Father (Person1,Person2) VALUES ('3','1')
INSERT INTO Person_Person_Mother (Person1,Person2) VALUES ('3','2')
INSERT INTO Person_Person_Mother (Person1,Person2) VALUES ('2','2')
INSERT INTO Person_Person_Siblings (Person1,Person2) VALUES ('3','2')
INSERT INTO Person_Person_Siblings (Person1,Person2) VALUES ('2','3')
INSERT INTO Role_ (id_,type_) values (NULL,'Employee');
INSERT INTO Employee_ (id_) values (1);
INSERT INTO Person_Role_Roles (Person1,Role2) VALUES ('1','1')
INSERT INTO Employee_Office_ (Employee1,Office2) VALUES ('1','1')
INSERT INTO Role_ (id_,type_) values (NULL,'Student');
INSERT INTO Student_ (id_) values (2);
INSERT INTO Role_ (id_,type_) values (NULL,'Student');
INSERT INTO Student_ (id_) values (3);
INSERT INTO School_ (id_,type_) values (NULL, 'School');
INSERT INTO Office_ (id_,type_) values (NULL, 'School');
INSERT INTO Person_Role_Roles (Person1,Role2) VALUES ('3','2')
INSERT INTO Person_Role_Roles (Person1,Role2) VALUES ('2','3')
INSERT INTO School_Student_ (School1,Student2) VALUES ('1','2')
INSERT INTO School_Student_ (School1,Student2) VALUES ('1','3')
SELECT count(*) FROM Person_
SELECT Person_.id_,Person_.type_,Person_.name_,Person_.age_,Person_.sex_ FROM 
Person_ ORDER BY Person_.age_
SELECT Person_.id_,Person_.type_,Person_.name_,Person_.age_,Person_.sex_ FROM 
Person_ WHERE Person_.id_ in (SELECT Person_.id_ FROM Person_ WHERE Person_.id_ 
in (SELECT Person_Person_Children.Person2 FROM Person_Person_Children WHERE 
Person_Person_Children.Person1 = '1') INTERSECT SELECT Person_.id_ FROM Person_ 
WHERE Person_.id_ in (SELECT Person_Person_Children.Person2 FROM 
Person_Person_Children WHERE Person_Person_Children.Person1 = '2'))
SELECT Person_.id_,Person_.type_,Person_.name_,Person_.age_,Person_.sex_ FROM 
Person_ WHERE Person_.id_ = '100'
DROP TABLE schema
DROP TABLE Person_
DROP TABLE Role_
DROP TABLE Student_
DROP TABLE Employee_
DROP TABLE School_
DROP TABLE Office_
DROP TABLE Person_Person_Mother
DROP TABLE Person_Person_Father
DROP TABLE Person_Person_Siblings
DROP TABLE Person_Person_Children
DROP TABLE Person_Role_Roles
DROP TABLE School_Student_
DROP TABLE Employee_Office_
</pre></div> <hr>
 By Tero Laitinen &lt;<a href="mailto:tero.laitinen@iki.fi">tero.laitinen@iki.fi</a>&gt; </div>
<hr />
<a href="http://sourceforge.net"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=113304&amp;type=2" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>

